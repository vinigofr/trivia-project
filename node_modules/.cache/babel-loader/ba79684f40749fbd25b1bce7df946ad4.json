{"ast":null,"code":"var _jsxFileName = \"/home/vinicius/Desktop/Projects/sd-011-project-trivia-react-redux/src/pages/Feedback.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport md5 from 'crypto-js/md5';\nimport PropTypes from 'prop-types';\n\nclass Feedback extends Component {\n  componentDidMount() {\n    localStorage.setItem('ranking', []);\n  }\n\n  scoreMessage(assertions) {\n    const minimumAssertion = 3;\n\n    if (assertions < minimumAssertion) {\n      return 'Podia ser melhor...';\n    }\n\n    return 'Mandou bem!';\n  }\n\n  sendPlayerInfoToRanking() {\n    const _localStorage = localStorage,\n          ranking = _localStorage.ranking;\n    const gravatarHash = md5(gravatarEmail).toString();\n    const avatar = `https://www.gravatar.com/avatar/${gravatarHash}`;\n\n    if (ranking) {\n      localStorage.getItem('ranking', []);\n      const oldRanking = JSON.parse(ranking);\n      const newRanking = oldRanking.concat({\n        name: this.props.name,\n        score: this.props.score,\n        picture: avatar\n      });\n      return localStorage.setItem('ranking', JSON.stringify(newRanking));\n    }\n\n    const emptyRanking = {\n      name: this.props.name,\n      score: this.props.score,\n      picture: avatar\n    };\n    return localStorage.setItem('ranking', emptyRanking);\n  }\n\n  render() {\n    const _this$props = this.props,\n          history = _this$props.history,\n          player = _this$props.sectionPlayer;\n    const name = player.name,\n          score = player.score,\n          gravatarEmail = player.gravatarEmail,\n          assertions = player.assertions;\n    const gravatarHash = md5(gravatarEmail).toString();\n    return React.createElement(\"div\", {\n      \"data-testid\": \"feedback-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, this.scoreMessage(assertions)), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, 'Jogador: ', React.createElement(\"span\", {\n      \"data-testid\": \"header-player-name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, name), ' acertou ', React.createElement(\"span\", {\n      \"data-testid\": \"feedback-total-question\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, assertions), ' questões.'), React.createElement(\"img\", {\n      alt: \"avatar\",\n      src: `https://www.gravatar.com/avatar/${gravatarHash}`,\n      \"data-testid\": \"header-profile-picture\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Pontua\\xE7\\xE3o:\", React.createElement(\"span\", {\n      \"data-testid\": \"header-score\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, score), React.createElement(\"span\", {\n      \"data-testid\": \"feedback-total-score\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, score)), React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"btn-play-again\",\n      onClick: () => history.push('/'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Jogar novamente\"), React.createElement(\"button\", {\n      \"data-testid\": \"btn-ranking\",\n      type: \"button\",\n      onClick: () => history.push('/ranking'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Ver Ranking\"));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  sectionPlayer: state.sectionReducer.player\n});\n\nexport default connect(mapStateToProps)(Feedback);\nFeedback.propTypes = {\n  sectionPlayer: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    score: PropTypes.number.isRequired,\n    gravatarEmail: PropTypes.string.isRequired\n  }).isRequired,\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired\n  }).isRequired\n};","map":{"version":3,"sources":["/home/vinicius/Desktop/Projects/sd-011-project-trivia-react-redux/src/pages/Feedback.jsx"],"names":["React","Component","connect","md5","PropTypes","Feedback","componentDidMount","localStorage","setItem","scoreMessage","assertions","minimumAssertion","sendPlayerInfoToRanking","ranking","gravatarHash","gravatarEmail","toString","avatar","getItem","oldRanking","JSON","parse","newRanking","concat","name","props","score","picture","stringify","emptyRanking","render","history","player","sectionPlayer","push","mapStateToProps","state","sectionReducer","propTypes","shape","string","isRequired","number","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport md5 from 'crypto-js/md5';\nimport PropTypes from 'prop-types';\n\nclass Feedback extends Component {\n  componentDidMount() {\n    localStorage.setItem('ranking', []);\n  }\n\n  scoreMessage(assertions) {\n    const minimumAssertion = 3;\n    if (assertions < minimumAssertion) {\n      return 'Podia ser melhor...';\n    }\n    return 'Mandou bem!';\n  }\n\n  sendPlayerInfoToRanking() {\n    const { ranking } = localStorage;\n    const gravatarHash = md5(gravatarEmail).toString();\n    const avatar = `https://www.gravatar.com/avatar/${gravatarHash}`;\n    if (ranking) {\n      localStorage.getItem('ranking', []);\n      const oldRanking = JSON.parse(ranking);\n      const newRanking = oldRanking.concat({\n        name: this.props.name,\n        score: this.props.score,\n        picture: avatar,\n      });\n      return localStorage.setItem('ranking', JSON.stringify(newRanking));\n    }\n    const emptyRanking = {\n      name: this.props.name,\n      score: this.props.score,\n      picture: avatar,\n    };\n\n    return localStorage.setItem('ranking', emptyRanking);\n  }\n\n  render() {\n    const { history, sectionPlayer: player } = this.props;\n    const { name, score, gravatarEmail, assertions } = player;\n    const gravatarHash = md5(gravatarEmail).toString();\n\n    return (\n      <div data-testid=\"feedback-text\">\n        <h1>{this.scoreMessage(assertions)}</h1>\n        <h1>\n          {'Jogador: '}\n          <span data-testid=\"header-player-name\">{ name }</span>\n          {' acertou '}\n          <span data-testid=\"feedback-total-question\">{ assertions }</span>\n          {' questões.'}\n        </h1>\n        <img\n          alt=\"avatar\"\n          src={ `https://www.gravatar.com/avatar/${gravatarHash}` }\n          data-testid=\"header-profile-picture\"\n        />\n        <p>\n          {/* Lembrar de criar o componente header\n          para mostrar placar e o resto. Req 14, tá no figma */}\n          Pontuação:\n          <span data-testid=\"header-score\">{score}</span>\n          <span data-testid=\"feedback-total-score\">{score}</span>\n        </p>\n        <button\n          type=\"button\"\n          data-testid=\"btn-play-again\"\n          onClick={ () => history.push('/') }\n        >\n          Jogar novamente\n        </button>\n        <button\n          data-testid=\"btn-ranking\"\n          type=\"button\"\n          onClick={ () => history.push('/ranking') }\n        >\n          Ver Ranking\n        </button>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  sectionPlayer: state.sectionReducer.player,\n});\n\nexport default connect(mapStateToProps)(Feedback);\n\nFeedback.propTypes = {\n  sectionPlayer: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    score: PropTypes.number.isRequired,\n    gravatarEmail: PropTypes.string.isRequired,\n  }).isRequired,\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}