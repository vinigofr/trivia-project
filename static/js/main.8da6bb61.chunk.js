(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{108:function(e,t,n){e.exports=n.p+"static/media/trivia.466d153e.png"},113:function(e,t,n){e.exports=n(220)},122:function(e,t,n){},124:function(e,t,n){},131:function(e,t){},133:function(e,t){},166:function(e,t){},167:function(e,t){},173:function(e,t){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},220:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(45),o=n.n(i),c=n(65),s=n(11),u=(n(122),n(4)),l=n(5),m=n(7),d=n(6),p=n(8),h=n(25),f=n(27),v=n.n(f),b=n(47),y=n(10),g=n(108),E=n.n(g);n(124);var O=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={name:"",email:""},n.verifyRegexEmail=n.verifyRegexEmail.bind(Object(y.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"verifyRegexEmail",value:function(){var e=this.state,t=e.email,n=e.name;return/^([\w.-]+)@([\w-]+)((\.(\w){2,3})+)$/.test(t)&&n.length>0}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(b.a)({},n,a))}},{key:"startGame",value:function(){var e,t,n,a,r;return v.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.triviaAPI,n=e.history,a=e.login,i.next=3,v.a.awrap(t());case 3:r=this.props.token,localStorage.setItem("token",r),n.push("/game"),a(this.state);case 7:case"end":return i.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.props.history;return r.a.createElement("div",{className:"login-container"},r.a.createElement("img",{src:E.a,className:"App-logo",alt:"logo",width:"150"}),r.a.createElement("h1",null,"Login"),r.a.createElement("div",{className:"login"},r.a.createElement("label",{htmlFor:"inputEmail"},r.a.createElement("input",{type:"text",placeholder:"Email",id:"inputEmail","data-testid":"input-gravatar-email",name:"email",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("label",{htmlFor:"inputName"},r.a.createElement("input",{type:"text",placeholder:"Nome",id:"inputName","data-testid":"input-player-name",name:"name",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"login-buttons"},r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:!this.verifyRegexEmail(),onClick:function(){return e.startGame()}},"Jogar"),r.a.createElement("button",{type:"button","data-testid":"btn-settings",onClick:function(){return t.push("/settings")}},r.a.createElement("span",{role:"img","aria-label":"engine-emoji"},"\u2699\ufe0f"))))}}]),t}(a.Component),k=Object(s.b)((function(e){return{token:e.triviaReducer.sectionTriviaToken}}),(function(e){return{triviaAPI:function(){return e((function(e){return fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json()})).then((function(t){return e({type:"TOKEN_REQUEST_SUCCESS",token:t.token})})).catch((function(t){return e({type:"TOKEN_REQUEST_ERROR",errorData:t})}))}))},login:function(t){return e(function(e){return{type:"LOGIN",data:e}}(t))}}}))(O),j=n(38),w=n.n(j),S=n(112);function x(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}n(210);var C=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.alternativeIndex,a=e.answerClick,i=e.styleAlternative,o=e.countDown;return r.a.createElement("button",{type:"button",key:t,"data-testid":"wrong-answer-".concat(n),onClick:function(e){return a(e)},style:i?{border:"3px solid rgb(255, 0, 0)"}:null,disabled:0===o},x(t))}}]),t}(a.Component),T=(n(211),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.answerClick,a=e.styleAlternative,i=e.countDown;return r.a.createElement("button",{type:"button","data-testid":"correct-answer",onClick:function(e){return n(e)},style:a?{border:"3px solid rgb(6, 240, 15)"}:null,disabled:0===i},x(t))}}]),t}(a.Component)),R=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).renderAlternatives=e.renderAlternatives.bind(Object(y.a)(e)),e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderAlternatives",value:function(){var e=this.props,t=e.alternatives,n=e.styleAlternative,a=e.countDown,i=e.answerClick;return t.map((function(e,t,o){return e===o[o.length-1]?r.a.createElement(T,{key:e,text:e,styleAlternative:n,answerClick:i,countDown:a}):r.a.createElement(C,{key:e,text:e,alternativeIndex:t,styleAlternative:n,answerClick:i,countDown:a})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderAlternatives().sort((function(e,t){return t.key>e.key?-1:1})))}}]),t}(a.Component),I=Object(s.b)((function(e){return{questions:e.triviaReducer.questions}}))(R),q=(n(212),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.index,n=e.length,a=e.nextQuestion,i=e.history;return r.a.createElement("button",{onClick:function(){return t<n?a():i.push("/feedback")},type:"button","data-testid":"btn-next"},t<n?"Pr\xf3xima pergunta":"Feedback")}}]),t}(a.Component)),N=(n(213),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={questionIndex:0,questions:[],styleAlternative:!1,countDown:30,assertions:0,score:0},e.handleState=e.handleState.bind(Object(y.a)(e)),e.answerClick=e.answerClick.bind(Object(y.a)(e)),e.nextQuestion=e.nextQuestion.bind(Object(y.a)(e)),e.updateTimer=e.updateTimer.bind(Object(y.a)(e)),e.difficult=e.difficult.bind(Object(y.a)(e)),e.throwToLocalStorage=e.throwToLocalStorage.bind(Object(y.a)(e)),e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e,t,n,a;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e={player:{name:"",assertions:0,score:0,gravatarEmail:""}},localStorage.setItem("state",JSON.stringify(e)),t=this.props.requestQuestions,n=localStorage.getItem("token"),r.next=6,v.a.awrap(t(n));case 6:a=this.props.questions,this.handleState(a),this.updateTimer();case 9:case"end":return r.stop()}}),null,this)}},{key:"updateTimer",value:function(){var e=this,t=30;this.interval=setInterval((function(){0===t&&(e.setState({styleAlternative:!0}),clearInterval(e.interval)),e.setState({countDown:t}),t-=1}),1e3)}},{key:"handleState",value:function(e){this.setState({questions:e.results})}},{key:"throwToLocalStorage",value:function(){var e=this.props,t=e.email,n=e.username,a=e.section,r=this.state,i={player:{name:n,assertions:r.assertions,score:r.score,gravatarEmail:t}};localStorage.setItem("state",JSON.stringify(i)),a(i.player)}},{key:"nextQuestion",value:function(){var e=this.state.questionIndex;this.setState({questionIndex:e+1,styleAlternative:!1}),this.updateTimer()}},{key:"difficult",value:function(e){switch(e.difficulty){case"easy":return 1;case"medium":return 2;case"hard":return"3";default:return null}}},{key:"answerClick",value:function(e){var t,n,a,r,i,o,c,s,u=this;return v.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:t=e.target,n=this.props.questions,a=this.state,r=a.questionIndex,i=a.assertions,o=a.countDown,c=a.score,this.setState({styleAlternative:!0}),n.results[r].correct_answer===t.innerHTML?(10,s=10+o*this.difficult(n.results[r]),this.setState({assertions:i+1,score:c+s}),this.setState({},(function(){return u.throwToLocalStorage()}))):this.throwToLocalStorage(),clearInterval(this.interval);case 6:case"end":return l.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state,n=t.questions,a=t.questionIndex,i=t.styleAlternative,o=t.countDown,c=this.props.history;return 0===n.length?r.a.createElement("div",null,"Loading"):r.a.createElement("div",{className:"questions"},n.map((function(t,s){var u=t.category,l=t.question,m=t.correct_answer,d=t.incorrect_answers;return a===s?r.a.createElement("div",{key:s},r.a.createElement("p",null,"Tempo restante:"," ".concat(o)),r.a.createElement("p",{"data-testid":"question-text"},u),r.a.createElement("p",{"data-testid":"question-category"},x(l)),r.a.createElement("div",{className:"alternatives-container"},r.a.createElement(I,{alternatives:[].concat(Object(S.a)(d),[m]),styleAlternative:i,countDown:o,answerClick:e.answerClick,index:s})),i?r.a.createElement(q,{index:a,length:n.length-1,nextQuestion:e.nextQuestion,history:c}):null):null})))}}]),t}(a.Component)),A=Object(s.b)((function(e){return{questions:e.triviaReducer.questions,email:e.loginReducer.email,username:e.loginReducer.name}}),(function(e){return{requestQuestions:function(t){return e(function(e){return function(t){return fetch("https://opentdb.com/api.php?amount=5&token=".concat(e)).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:"QUESTIONS_REQUEST",questions:e}}(e))}))}}(t))},section:function(t){return e(function(e){return{type:"SECTION_USER",section:e}}(t))}}}))(N),P=(n(214),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.sectionPlayer.score;return r.a.createElement("div",null,"Placar: ",r.a.createElement("span",{"data-testid":"header-score"},e||0))}}]),t}(a.Component)),Q=Object(s.b)((function(e){return{sectionPlayer:e.sectionReducer.player}}))(P),D=(n(215),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"md5Converter",value:function(e){var t=w()(e).toString();return"https://www.gravatar.com/avatar/".concat(t,"/")}},{key:"render",value:function(){var e=this.props,t=e.player,n=e.history,a=t.email,i=t.name;return r.a.createElement("div",{className:"game"},r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("img",{alt:"Avatar de ".concat(i),"data-testid":"header-profile-picture",src:this.md5Converter(a)}),r.a.createElement("p",null,"Jogador: ",r.a.createElement("span",{"data-testid":"header-player-name"},i))),r.a.createElement(Q,null)),r.a.createElement(A,{history:n}))}}]),t}(a.Component)),_=Object(s.b)((function(e){return{player:e.loginReducer,token:e.triviaReducer.sectionTriviaToken}}),null)(D),J=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es do jogo"))}}]),t}(a.Component),L=(n(216),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).sendPlayerInfoToRanking=n.sendPlayerInfoToRanking.bind(Object(y.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.sendPlayerInfoToRanking()}},{key:"scoreMessage",value:function(e){return e<3?"Podia ser melhor...":"Mandou bem!"}},{key:"sendPlayerInfoToRanking",value:function(){var e=localStorage.ranking,t=this.props.sectionPlayer,n=t.name,a=t.score,r=t.gravatarEmail,i=w()(r).toString(),o="https://www.gravatar.com/avatar/".concat(i);if(e){localStorage.getItem("ranking",[]);var c=JSON.parse(e).concat({name:n,score:a,picture:o});return localStorage.setItem("ranking",JSON.stringify(c))}var s={name:n,score:a,picture:o};return localStorage.setItem("ranking",JSON.stringify([s]))}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.sectionPlayer,a=n.name,i=n.score,o=n.gravatarEmail,c=n.assertions,s=w()(o).toString();return r.a.createElement("div",{"data-testid":"feedback-text"},r.a.createElement("h1",null,this.scoreMessage(c)),r.a.createElement("h1",null,"Jogador: ",r.a.createElement("span",{"data-testid":"header-player-name"},a)," acertou ",r.a.createElement("span",{"data-testid":"feedback-total-question"},c)," quest\xf5es."),r.a.createElement("img",{alt:"avatar",src:"https://www.gravatar.com/avatar/".concat(s),"data-testid":"header-profile-picture"}),r.a.createElement("p",null,"Pontua\xe7\xe3o:",r.a.createElement("span",{"data-testid":"header-score"},i),r.a.createElement("span",{"data-testid":"feedback-total-score"},i)),r.a.createElement("button",{type:"button","data-testid":"btn-play-again",onClick:function(){return t.push("/")}},"Jogar novamente"),r.a.createElement("button",{"data-testid":"btn-ranking",type:"button",onClick:function(){return t.push("/ranking")}},"Ver Ranking"))}}]),t}(a.Component)),U=Object(s.b)((function(e){return{sectionPlayer:e.sectionReducer.player}}))(L),M=(n(217),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"rankingSortPodium",value:function(e){return e.sort((function(e,t){return e.score>t.score?-1:1})),e}},{key:"render",value:function(){var e=this.props.history,t=JSON.parse(localStorage.getItem("ranking"));return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),this.rankingSortPodium(t).map((function(e,t){var n=e.name,a=e.picture,i=e.score;return r.a.createElement("div",{key:n},r.a.createElement("img",{alt:"Avatar de ".concat(n),src:a}),r.a.createElement("p",{"data-testid":"player-name-".concat(t)},n),r.a.createElement("span",{"data-testid":"player-score-".concat(t)},i))})),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:function(){return e.push("/")}},"Ir para o in\xedcio"))}}]),t}(a.Component)),F=(n(218),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:k}),r.a.createElement(h.a,{exact:!0,path:"/game",component:_}),r.a.createElement(h.a,{exact:!0,path:"/settings",component:J}),r.a.createElement(h.a,{exact:!0,path:"/feedback",component:U}),r.a.createElement(h.a,{exact:!0,path:"/ranking",component:M})))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=n(24),K=n(110),W=n(111),B={email:"",name:""},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{email:t.data.email,name:t.data.name};default:return e}},$=n(39),V={sectionTriviaToken:"",questions:{}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOKEN_REQUEST_SUCCESS":return Object($.a)({},e,{sectionTriviaToken:t.token});case"QUESTIONS_REQUEST":return Object($.a)({},e,{questions:t.questions});default:return e}},X={player:{name:"",assertions:0,score:0,gravatarEmail:""}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SECTION_USER":return Object($.a)({},e,{player:{name:t.section.name,assertions:t.section.assertions,score:t.section.score,gravatarEmail:t.section.gravatarEmail}});default:return e}},Z=Object(G.combineReducers)({loginReducer:H,triviaReducer:z,sectionReducer:Y}),ee=Object(G.createStore)(Z,Object(K.composeWithDevTools)(Object(G.applyMiddleware)(W.a)));o.a.render(r.a.createElement(c.a,null,r.a.createElement(s.a,{store:ee},r.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[113,1,2]]]);
//# sourceMappingURL=main.8da6bb61.chunk.js.map